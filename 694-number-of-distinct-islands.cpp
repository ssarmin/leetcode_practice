//https://leetcode.com/problems/number-of-distinct-islands
class Solution {
public:
    string helper(vector<vector<int>> &grid, int r0, int c0){
        vector<pair<int, int>> v;
        queue<pair<int, int>> q;
        q.push({r0,c0});
        int dx[] = {0, 0, 1, -1};
        int dy[] = {1, -1, 0, 0};
        while(!q.empty()){
            auto [r, c] = q.front();
            q.pop();
            v.push_back({r0-r,c0-c});
            for(int i=0; i<4; i++){
                int x = dx[i] + r;
                int y = dy[i] + c;
                if(x >= 0 && y >= 0 && x < grid.size() && y < grid[0].size() && grid[x][y] == 1){
                    grid[x][y] = -1;
                    q.push({x, y});
                }
            }   
        }
        sort(v.begin(), v.end());
        string dir = "";
        for(auto p: v){
            dir += to_string(p.first) + "_" + to_string(p.second) + "#";
        }
        return dir;
    }
    int numDistinctIslands(vector<vector<int>>& grid) {
        unordered_set<string> s;
        for(int r=0; r<grid.size(); r++){
            for(int c=0; c<grid[r].size(); c++){
                if(grid[r][c] == 1){
                    grid[r][c] = -1;
                    s.insert(helper(grid, r, c));
                }
            }
        }
        return s.size();
    }
};
/*
[[1,1],[1,1]]
[[1,1,0,0],[1,0,0,0],[0,0,1,1],[0,0,1,0]]
[[1,1,0],[1,0,0],[0,1,1],[0,0,1]]
[[1,1,1,0],[0,0,0,0],[1,0,1,0],[1,1,1,0]]
[[1,0,1],[0,0,0],[1,0,1]]
[[1,1,0,1,1],[1,0,0,1,0],[0,0,0,0,0],[1,1,0,1,1],[1,0,0,1,0]]
[[1,1,0],[0,1,0],[0,1,1]]
[[1,0,0],[1,1,1],[0,0,1]]
[[1,1,1,0],[0,0,0,0],[1,1,0,0],[0,1,0,0]]
[[1,1,1],[1,1,1],[0,0,1]]
[[0,0],[0,0]]
[[1,1,0,0,1,1],[1,0,0,0,1,0],[0,0,0,0,0,0],[1,1,0,0,1,1],[1,0,0,0,1,0]]
[[0,0,0,0,0],[0,1,0,0,0],[0,0,0,1,0],[0,0,0,0,0]]
[[1,1,0,0,0,1,1,0,0,0,1,1,0,0,0,1,1,0,0,0,1,1,0,0,0,1,1,0,0,0,1,1,0,0,0,1,1,0,0,0,1,1,0,0,0,1,1,0,0,0], [1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0], [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0], [1,1,1,0,0,1,1,1,0,0,1,1,1,0,0,1,1,1,0,0,1,1,1,0,0,1,1,1,0,0,1,1,1,0,0,1,1,1,0,0,1,1,1,0,0,1,1,1,0,0], [0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0], [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0], [1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0], [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0], [1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1], [1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0]]
[[0,0,0,0,1,0,1,1,0,0,1,0,1,1,0,1,1,1,0,1,1,1,0,1,0,0,0,0,0,0,0,0,0,1,0,0,1,1,0,0,0,1,1,1,1,1,1,0,1,1],[0,1,0,0,0,0,1,1,1,0,1,1,0,0,0,1,0,1,1,1,0,0,1,0,1,0,0,1,0,0,0,1,1,1,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,1],[1,0,0,0,0,0,0,1,1,1,1,0,1,1,0,0,0,0,1,0,0,1,0,0,1,1,1,0,0,0,0,0,1,1,1,0,0,1,1,1,0,1,1,0,1,0,1,1,1,1],[0,0,0,0,1,1,1,0,1,1,0,1,0,0,0,0,0,0,0,1,0,1,0,1,1,0,0,0,0,0,1,1,0,0,1,1,1,0,1,1,1,1,0,1,1,0,0,0,1,1],[0,0,0,0,1,1,1,1,0,1,1,0,0,1,1,1,0,1,1,1,0,1,1,0,0,0,1,0,1,1,1,1,1,0,1,1,0,1,1,0,1,0,0,0,0,0,1,0,0,1],[0,0,1,1,1,0,1,0,0,0,1,0,0,0,0,0,1,0,1,0,0,1,0,1,0,0,1,1,1,0,1,1,1,1,1,0,1,0,1,1,1,1,0,0,0,0,0,1,0,1],[0,1,0,1,0,0,1,0,0,0,0,1,1,1,1,1,0,1,1,1,1,1,0,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,0,0,1,1,0,1,1,0],[0,1,0,0,1,1,1,1,0,1,1,0,1,0,1,0,0,0,1,0,0,0,0,0,1,0,1,1,0,1,0,0,1,0,1,1,1,0,1,0,0,1,1,1,0,0,1,0,1,0],[0,1,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,1,0,1,0,1,0,0,0,1,0,0,0,1,0,1,0,0,1,0,0,0,0,0,0,1,1,0,1,0,0,1,0,0]]
*/
