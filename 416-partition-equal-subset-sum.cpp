//https://leetcode.com/problems/partition-equal-subset-sum
class Solution {
public:
    bool helper(vector<int> &nums, int index, long long curr_sum, long long half, unordered_map<int, unordered_map<long long, bool>> &m){
        if(index >= nums.size())
            return half == curr_sum;
        if(curr_sum == half)
            return true;
        if(curr_sum > half)
            return false;
        if(m.count(index) && m[index].count(curr_sum))
            return m[index][curr_sum];
        m[index][curr_sum] = helper(nums, index+1, curr_sum + nums[index], half, m) || helper(nums, index+1, curr_sum, half, m);
        return m[index][curr_sum];
    }
    bool canPartition(vector<int>& nums) {
        long long total = accumulate(nums.begin(), nums.end(), 0);
        if(total%2 == 1)
            return false;
        if(nums.size() == 2)
            return nums[0] == nums[1];
        long long half = total/2;
        unordered_map<int, unordered_map<long long, bool>> m;
        bool flag = helper(nums, 0, 0, half, m);
        return flag;
    }
};

/*
[48,23,81,49,89,4,29,58,61,91,26,79,81,48,64,1,81,2,36,82,16,97,23,56,50,48,74,50,74,81,10,5,76,66,77,16,19,57,88,89,98,31,16,99,58,84,63,100,79,66,15,62,68,54,29,74,53,83,5,34,42,28,84,62,64,90,29,56,14,69,9,2,45,1,53,5,51,9,42,97,33,42,55,25,96,7,86,79,1,42,94,43,2,16,51,21,40,19,12]
[6,14,19,10,17,10,8,15,16,1,12,4,9,2,15]
[1,1]
[97,13,81,9,28,32,97,52,20,86,13,93,35,36,54,39,99,42,23,74,90,54,49,20,76,67,73,71,79,8,3,79,32,16,24,36,28,74,65,38,100,48,19,83,12,39,10,46,43,3,40,65,6,97,55,68,73,15,64,82,47,99,19,64,99,89,55,81,71,15,23,51,99,62,26,34,73,28,71,86,72,66,95,61,71,23,66,15,11,61,34,82,13,71,16,46,99,88,44,2]
[67,13,98,34,62,11,86,91,96,61,60,53,91,2,58,10,89,42,100,91,80,67,55,29,87,40,71,81,60,86,69,50,73,41,35,47,82,13,40,72,71,94,7,58,79,43,70,83,17,50,41,68,37,52,79,12,33,36,83,58,65,74,96,44,25,43,6,91,4,82,11,87,32,30,27,30,61,33,48,31,41,25,42,29,32,3,4,44,93,29,3,84,85,70,19,59,72,48,35,88]
[4,10,7,9,7,1,11,9,13,15]
[100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,99,97]
[80,38,97,19,81,96,70,35,12,44,33,51,78,86,31,74,94,54,11,91,7,90,83,12,91,67,40,80,39,87,17,49,66,56,15,99,95,91,22,49,14,23,18,74,22,62,14,94,75,97,45,32,9,21,14,70,93,14,91,6,99,12,29,32,26,33,44,24,82,84,95,10,91,38,23,27,64,88,83,85,7,23,62,49,60,67,31,55,87,42,61,4,7,10,12,8,94,9,30,59]
[1,1,1,1,1,1,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,100,99,100]
[14,9,8,4,3,2]
[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,97,95]
[1,2,3,5,17,6,14,12,6]
[23,13,11,7,6,5,5]
*/
[6,14,19,10,17,10,8,15,16,1,12,4,9,2,15]
[4,10,7,9,7,1,11,9,13,15]
[9,10,15,3,9,2,9,10,13,1]
[5,79,2,4,8,16,32,64,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100]
