//https://leetcode.com/problems/snakes-and-ladders

class Solution {
public:
    int snakesAndLadders(vector<vector<int>>& board) {
        int side = board.size();
        int last = side*side;
        queue<int> q;
        vector<bool> visit(last, false);
        q.push(0);
        visit[0] = true;
        int count = 0;
        bool flag = true;
        vector<int> v;
        for(int i=side-1; i>=0; i--){
            if(flag){
                for(int j=0; j<side; j++){
                    v.push_back(board[i][j] - 1);
                }
            }
            
            if(!flag){
                for(int j=side-1; j>=0; j--){
                    v.push_back(board[i][j] - 1);
                }
            }
            flag = !flag;
        }
        
        while(!q.empty()){
            int size = q.size();
            count++;
            while(size--){
                int index = q.front();
                q.pop();
                
                if((index+6) >= last){
                    return count;
                }
                for(int i=index+1; i<=index+6; i++){
                    if(v[i] == -2){
                        if(!visit[i]){
                            if(i+1 == last)
                                return count;
                            q.push(i);
                            visit[i] = true;
                        }
                    }else{
                        if(!visit[v[i]]){
                            if(v[i]+1 == last)
                                return count;
                            q.push(v[i]);
                            visit[v[i]] = true;
                        }
                    }
                }
            }
        }

        return -1;
    }
};


// [[-1,1,2,-1],[2,13,15,-1],[-1,10,-1,-1],[-1,6,2,8]]
// [[-1,-1,30,14,15,-1],[23,9,-1,-1,-1,9],[12,5,7,24,-1,30],[10,-1,-1,-1,25,17],[32,-1,28,-1,-1,32],[-1,-1,23,-1,13,19]]
// [[-1,-1,27,13,-1,25,-1],[-1,-1,-1,-1,-1,-1,-1],[44,-1,8,-1,-1,2,-1],[-1,30,-1,-1,-1,-1,-1],[3,-1,20,-1,46,6,-1],[-1,-1,-1,-1,-1,-1,29],[-1,29,21,33,-1,-1,-1]]
// [[-1,-1,19,10,-1],[2,-1,-1,6,-1],[-1,17,-1,19,-1],[25,-1,20,-1,-1],[-1,-1,-1,-1,15]]
// [[-1,-1,-1,-1,48,5,-1],[12,29,13,9,-1,2,32],[-1,-1,21,7,-1,12,49],[42,37,21,40,-1,22,12],[42,-1,2,-1,-1,-1,6],[39,-1,35,-1,-1,39,-1],[-1,36,-1,-1,-1,-1,5]]
// [[-1,1,1,1],[-1,7,1,1],[16,1,1,1],[-1,1,9,1]]
// [[-1,-1,-1],[-1,9,8],[-1,8,9]]
// [[1,1,-1],[1,1,1],[-1,1,1]]
// [[-1,33,-1,-1,-1,-1,-1,-1],[5,-1,-1,-1,-1,49,-1,-1],[-1,-1,-1,31,-1,-1,54,43],[-1,-1,26,13,41,-1,-1,-1],[-1,-1,-1,-1,14,45,23,2],[30,33,-1,-1,-1,-1,31,-1],[17,49,-1,-1,-1,-1,-1,-1],[-1,56,12,47,-1,-1,-1,-1]]
// [[-1,-1,27,13,-1,25,-1],[-1,-1,-1,-1,-1,-1,-1],[44,-1,8,-1,-1,2,-1],[-1,30,-1,-1,-1,-1,-1],[3,-1,20,-1,46,6,-1],[-1,-1,-1,-1,-1,-1,29],[-1,29,21,33,-1,-1,-1]]
// [[-1,1,2,-1],[2,13,15,-1],[-1,10,-1,-1],[-1,6,2,8]]
// [[2,-1,-1,-1,-1],[-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1]]
// [[-1,-1,46,-1,42,-1,-1,-1,-1],[-1,53,65,57,-1,-1,16,-1,7],[-1,-1,-1,-1,-1,-1,43,-1,-1],[29,-1,63,-1,-1,-1,-1,12,-1],[-1,40,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,14,-1],[-1,6,-1,-1,10,-1,12,-1,78],[46,-1,3,-1,41,-1,20,79,-1],[-1,-1,45,32,-1,-1,-1,-1,60]]
