//https://leetcode.com/problems/reorder-routes-to-make-all-paths-lead-to-the-city-zero
class Solution {
public:
    int minReorder(int n, vector<vector<int>>& connections) {
        unordered_map<int, unordered_set<int>> m_adj;
        unordered_map<int, unordered_set<int>> m_neighbor;
        for(auto a: connections){
            m_adj[a[0]].insert(a[1]);
            m_neighbor[a[0]].insert(a[1]);
            m_neighbor[a[1]].insert(a[0]);
        }
        int count = 0;
        queue<int> q;
        q.push(0);
        unordered_set<int> visit;
        visit.insert(0);
        while(!q.empty()){
            int size = q.size();
            while(size--){
                int node = q.front();
                visit.insert(node);
                q.pop();
                for(auto a: m_neighbor[node]){
                    if(visit.count(a)){
                        continue; 
                    }
                    if(!m_adj[a].count(node)){
                        count++;
                    }
                    q.push(a);
                }
            }
        }
        return count;
    }
};


// 3
// [[1,2],[2,0]]
// 1486
// [[1,0],[2,0],[0,3],[1,4],[5,2],[3,6],[3,7],[8,4],[7,9],[10,7],[1,11],[12,3],[7,13],[14,4],[4,15],[3,16],[17,15],[2,18],[5,19],[20,0],[21,18],[17,22],[2,23],[17,24],[15,25],[20,26],[27,19],[14,28],[29,19],[3,30],[29,31],[32,0],[33,14],[21,34],[35,3],[16,36],[37,35],[38,9],[39,8],[29,40],[41,26],[42,17],[21,43],[44,16],[2,45],[35,46],[47,23],[44,48],[27,49],[50,8],[51,10],[11,52],[53,50],[40,54],[55,36],[26,56],[57,17],[58,37],[2,59],[20,60],[61,33],[36,62],[63,53],[64,16],[65,31],[51,66],[40,67],[9,68],[69,65],[70,56],[71,3],[58,72],[68,73],[74,10],[49,75],[58,76],[77,49],[78,10],[79,35],[80,36],[77,81],[82,39],[83,79],[15,84],[85,27],[86,3],[87,67],[88,3],[18,89],[90,34],[17,91],[35,92],[93,69],[31,94],[16,95],[17,96],[97,92],[98,50],[99,56],[90,100],[101,89],[94,102],[103,71],[82,104],[61,105],[106,85],[16,107],[108,68],[94,109],[110,17],[111,61],[55,112],[91,113],[114,27],[115,108],[59,116],[3,117],[15,118],[67,119],[120,67],[97,121],[122,46],[0,123],[119,124],[74,125],[8,126],[127,100],[17,128],[99,129],[130,77],[106,131],[132,122],[21,133],[71,134],[0,135],[136,26],[137,73],[138,113],[132,139],[16,140],[141,40],[142,104],[105,143],[144,38],[56,145],[52,146],[21,147],[148,61],[144,149],[150,35],[80,151],[141,152],[153,31],[95,154],[57,155],[156,113],[103,157],[0,158],[143,159],[160,139],[1,161],[162,41],[73,163],[25,164],[165,41],[166,158],[167,146],[168,134],[169,1],[170,16],[171,120],[172,140],[173,71],[166,174],[61,175],[176,152],[148,177],[91,178],[179,99],[93,180],[181,154],[25,182],[183,67],[52,184],[132,185],[119,186],[187,119],[184,188],[78,189],[190,113],[147,191],[192,107],[193,23],[194,184],[12,195],[79,196],[197,145],[3,198],[199,153],[42,200],[201,148],[134,202],[41,203],[204,127],[171,205],[121,206],[207,84],[208,108],[209,90],[210,28],[211,66],[212,167],[93,213],[214,205],[77,215],[216,134],[217,167],[218,4],[127,219],[220,163],[96,221],[157,222],[223,157],[160,224],[225,97],[169,226],[28,227],[228,117],[108,229],[230,79],[231,159],[206,232],[90,233],[234,10],[57,235],[181,236],[237,199],[229,238],[39,239],[192,240],[241,240],[60,242],[243,146],[53,244],[109,245],[62,246],[47,247],[248,245],[143,249],[250,2],[236,251],[49,252],[18,253],[108,254],[255,217],[256,14],[257,19],[258,192],[17,259],[102,260],[190,261],[262,72],[91,263],[264,57],[265,178],[216,266],[263,267],[262,268],[204,269],[114,270],[271,115],[272,130],[255,273],[272,274],[275,184],[240,276],[186,277],[278,144],[279,169],[151,280],[281,63],[45,282],[78,283],[121,284],[285,171],[286,197],[287,168],[288,21],[289,158],[167,290],[84,291],[292,37],[231,293],[294,166],[295,97],[296,94],[221,297],[298,110],[299,28],[209,300],[234,301],[302,203],[303,290],[304,175],[305,26],[306,75],[154,307],[308,69],[239,309],[297,310],[136,311],[196,312],[313,3],[112,314],[235,315],[316,59],[317,242],[318,10],[319,9],[110,320],[321,232],[265,322],[166,323],[299,324],[325,143],[89,326],[327,323],[328,126],[12,329],[10,330],[224,331],[134,332],[333,311],[334,294],[335,187],[336,87],[337,127],[17,338],[339,74],[154,340],[341,182],[269,342],[343,11],[78,344],[186,345],[86,346],[131,347],[348,250],[15,349],[350,281],[351,273],[15,352],[159,353],[354,110],[297,355],[34,356],[200,357],[358,6],[72,359],[162,360],[320,361],[47,362],[363,328],[364,92],[354,365],[112,366],[324,367],[209,368],[369,33],[370,233],[371,176],[91,372],[373,84],[374,45],[246,375],[35,376],[377,184],[175,378],[238,379],[380,107],[232,381],[382,102],[291,383],[384,236],[385,211],[169,386],[387,42],[21,388],[389,113],[390,244],[54,391],[210,392],[203,393],[359,394],[338,395],[155,396],[185,397],[398,294],[319,399],[351,400],[1,401],[402,2],[349,403],[249,404],[405,19],[290,406],[206,407],[281,408],[312,409],[96,410],[411,130],[346,412],[298,413],[189,414],[224,415],[138,416],[417,174],[418,292],[237,419],[420,59],[421,239],[422,170],[423,194],[424,26],[373,425],[57,426],[427,410],[345,428],[87,429],[137,430],[338,431],[432,289],[433,216],[434,257],[90,435],[359,436],[156,437],[438,426],[204,439],[440,58],[441,186],[240,442],[443,155],[444,348],[146,445],[351,446],[180,447],[293,448],[449,193],[450,426],[451,205],[48,452],[453,200],[454,385],[16,455],[85,456],[457,110],[458,235],[259,459],[460,304],[461,373],[183,462],[463,270],[226,464],[453,465],[366,466],[467,4],[220,468],[469,355],[470,11],[471,102],[450,472],[385,473],[253,474],[64,475],[476,62],[477,378],[420,478],[479,291],[480,87],[284,481],[197,482],[483,4],[484,291],[287,485],[486,286],[487,369],[488,471],[366,489],[490,233],[491,399],[492,206],[200,493],[494,253],[495,99],[466,496],[308,497],[18,498],[499,372],[500,110],[134,501],[502,471],[503,404],[504,34],[460,505],[506,217],[367,507],[501,508],[509,493],[105,510],[511,275],[233,512],[436,513],[514,132],[515,286],[516,101],[517,89],[518,233],[519,80],[122,520],[380,521],[333,522],[31,523],[319,524],[525,383],[526,41],[527,85],[528,178],[421,529],[486,530],[531,427],[532,481],[533,37],[534,332],[535,28],[129,536],[483,537],[418,538],[123,539],[540,120],[500,541],[30,542],[285,543],[205,544],[244,545],[546,481],[161,547],[548,306],[549,371],[550,313],[238,551],[494,552],[553,392],[73,554],[396,555],[194,556],[1,557],[157,558],[520,559],[560,412],[113,561],[562,222],[563,97],[29,564],[565,57],[566,175],[567,164],[521,568],[171,569],[570,200],[571,133],[421,572],[573,40],[574,380],[575,360],[203,576],[356,577],[578,544],[579,306],[580,413],[169,581],[582,506],[247,583],[438,584],[585,424],[586,102],[297,587],[439,588],[417,589],[274,590],[426,591],[430,592],[262,593],[62,594],[595,406],[312,596],[597,573],[598,10],[599,228],[444,600],[601,338],[602,232],[387,603],[576,604],[605,445],[606,320],[607,339],[608,486],[306,609],[439,610],[271,611],[449,612],[20,613],[614,544],[491,615],[616,418],[617,97],[302,618],[501,619],[111,620],[621,373],[405,622],[232,623],[543,624],[625,301],[556,626],[373,627],[526,628],[629,261],[423,630],[631,532],[632,313],[572,633],[152,634],[635,415],[472,636],[637,98],[638,221],[639,67],[640,338],[641,280],[642,51],[643,529],[293,644],[305,645],[646,192],[131,647],[613,648],[649,96],[484,650],[499,651],[338,652],[302,653],[297,654],[423,655],[318,656],[539,657],[303,658],[659,576],[247,660],[482,661],[662,315],[424,663],[570,664],[665,305],[666,438],[513,667],[416,668],[669,279],[52,670],[671,498],[672,203],[146,673],[147,674],[675,391],[291,676],[677,652],[52,678],[679,95],[680,662],[681,580],[682,610],[683,231],[644,684],[610,685],[665,686],[130,687],[688,108],[602,689],[690,180],[674,691],[452,692],[111,693],[694,596],[685,695],[696,105],[697,243],[698,143],[542,699],[452,700],[67,701],[702,154],[156,703],[700,704],[705,587],[669,706],[253,707],[708,192],[709,437],[467,710],[711,603],[499,712],[57,713],[625,714],[715,461],[716,580],[717,143],[272,718],[719,485],[720,566],[721,534],[722,262],[412,723],[724,153],[725,95],[726,679],[161,727],[728,632],[329,729],[730,145],[731,589],[35,732],[586,733],[734,371],[735,484],[736,265],[570,737],[327,738],[541,739],[740,119],[680,741],[19,742],[743,277],[619,744],[270,745],[746,223],[370,747],[748,29],[749,567],[750,181],[751,261],[440,752],[753,438],[754,520],[313,755],[756,181],[563,757],[492,758],[759,578],[265,760],[189,761],[762,139],[422,763],[388,764],[64,765],[354,766],[767,283],[97,768],[769,166],[80,770],[771,479],[628,772],[773,639],[774,567],[775,595],[185,776],[274,777],[778,632],[760,779],[780,503],[781,400],[782,768],[783,628],[784,333],[785,766],[756,786],[787,180],[38,788],[789,542],[647,790],[309,791],[792,383],[411,793],[794,0],[130,795],[730,796],[775,797],[798,324],[238,799],[800,584],[801,28],[565,802],[803,659],[516,804],[805,309],[806,540],[807,50],[808,556],[809,321],[810,10],[445,811],[597,812],[546,813],[673,814],[815,773],[557,816],[571,817],[818,73],[819,639],[820,341],[821,643],[398,822],[133,823],[824,224],[825,770],[826,283],[827,627],[207,828],[224,829],[830,562],[831,233],[322,832],[345,833],[834,179],[835,621],[836,570],[196,837],[14,838],[811,839],[221,840],[173,841],[729,842],[647,843],[415,844],[115,845],[486,846],[11,847],[716,848],[163,849],[532,850],[419,851],[852,689],[853,735],[854,456],[256,855],[22,856],[857,575],[41,858],[233,859],[358,860],[861,731],[862,754],[863,729],[819,864],[102,865],[679,866],[867,147],[18,868],[869,654],[602,870],[871,619],[364,872],[873,553],[470,874],[725,875],[6,876],[118,877],[180,878],[292,879],[436,880],[126,881],[882,852],[313,883],[141,884],[885,301],[435,886],[36,887],[510,888],[707,889],[890,388],[283,891],[855,892],[893,689],[894,701],[895,766],[896,538],[897,818],[813,898],[899,622],[900,752],[548,901],[144,902],[125,903],[904,509],[889,905],[906,74],[907,282],[236,908],[909,804],[167,910],[393,911],[590,912],[913,703],[914,771],[915,881],[291,916],[41,917],[369,918],[759,919],[85,920],[921,640],[922,565],[424,923],[924,680],[925,909],[188,926],[927,88],[425,928],[451,929],[805,930],[325,931],[932,160],[933,906],[71,934],[498,935],[936,51],[361,937],[938,735],[939,581],[838,940],[906,941],[91,942],[943,917],[944,63],[695,945],[647,946],[468,947],[948,339],[377,949],[479,950],[850,951],[952,765],[868,953],[615,954],[345,955],[0,956],[957,910],[277,958],[189,959],[639,960],[961,188],[962,130],[963,96],[165,964],[410,965],[966,275],[967,135],[968,123],[654,969],[970,52],[971,763],[972,490],[434,973],[974,569],[599,975],[976,426],[282,977],[978,130],[979,215],[980,879],[981,584],[659,982],[62,983],[662,984],[567,985],[986,356],[237,987],[988,759],[989,311],[990,610],[991,340],[992,232],[993,494],[621,994],[671,995],[996,176],[997,742],[998,19],[999,84],[54,1000],[341,1001],[1002,500],[1003,418],[1004,623],[1005,53],[1006,618],[1007,250],[179,1008],[982,1009],[1010,232],[1011,571],[307,1012],[521,1013],[833,1014],[946,1015],[120,1016],[1017,401],[234,1018],[1019,489],[1020,95],[1021,469],[1022,230],[515,1023],[395,1024],[737,1025],[1026,352],[93,1027],[202,1028],[1029,670],[1030,862],[1031,179],[430,1032],[762,1033],[75,1034],[224,1035],[846,1036],[458,1037],[827,1038],[930,1039],[1040,327],[1041,770],[826,1042],[205,1043],[1044,224],[1045,621],[467,1046],[743,1047],[1048,9],[411,1049],[1050,404],[1051,824],[756,1052],[364,1053],[771,1054],[1055,65],[230,1056],[596,1057],[1058,106],[755,1059],[1060,1029],[1061,1036],[1062,480],[1063,286],[496,1064],[401,1065],[1066,826],[655,1067],[1068,759],[838,1069],[540,1070],[1071,837],[1072,903],[1073,894],[1074,146],[1075,458],[10,1076],[1077,499],[861,1078],[1022,1079],[1080,550],[1081,954],[660,1082],[1083,52],[1084,327],[1085,867],[440,1086],[1087,755],[1088,62],[17,1089],[738,1090],[684,1091],[983,1092],[197,1093],[1094,129],[1095,517],[446,1096],[1097,118],[180,1098],[1099,14],[1047,1100],[491,1101],[254,1102],[1103,288],[811,1104],[1105,927],[1106,1003],[197,1107],[859,1108],[74,1109],[1093,1110],[1111,423],[1112,1108],[200,1113],[1114,354],[1115,719],[430,1116],[586,1117],[1118,456],[571,1119],[1040,1120],[922,1121],[359,1122],[1123,74],[1124,27],[188,1125],[5,1126],[1127,594],[1128,1004],[1129,829],[538,1130],[1131,599],[518,1132],[47,1133],[275,1134],[1135,987],[1136,664],[1137,1129],[1138,548],[433,1139],[651,1140],[866,1141],[567,1142],[1143,65],[117,1144],[1001,1145],[1146,554],[799,1147],[82,1148],[1149,835],[144,1150],[1151,74],[200,1152],[1153,727],[685,1154],[29,1155],[848,1156],[1157,771],[105,1158],[1159,725],[950,1160],[937,1161],[1073,1162],[1163,1003],[156,1164],[1165,202],[150,1166],[1167,1134],[777,1168],[1169,114],[487,1170],[858,1171],[1172,412],[1039,1173],[1174,1064],[261,1175],[1176,170],[1177,787],[529,1178],[1179,1159],[1180,936],[1181,1171],[1182,313],[1183,327],[772,1184],[696,1185],[824,1186],[386,1187],[1188,742],[1189,521],[1190,237],[1158,1191],[1192,1004],[261,1193],[1194,249],[916,1195],[1196,548],[59,1197],[540,1198],[1199,400],[539,1200],[1201,75],[1202,798],[205,1203],[1204,1014],[497,1205],[1206,76],[1207,797],[1208,429],[1209,488],[291,1210],[1211,250],[714,1212],[1213,176],[1214,610],[606,1215],[1216,861],[958,1217],[911,1218],[1219,383],[1220,838],[1221,284],[786,1222],[686,1223],[1224,996],[1225,192],[123,1226],[795,1227],[655,1228],[1229,317],[1230,958],[385,1231],[1232,35],[329,1233],[1234,265],[1235,747],[825,1236],[1237,1052],[431,1238],[1239,841],[1240,731],[847,1241],[1242,1065],[783,1243],[565,1244],[1245,348],[1246,587],[1247,242],[1248,1118],[785,1249],[48,1250],[1251,1128],[970,1252],[281,1253],[340,1254],[1255,1138],[1028,1256],[390,1257],[1127,1258],[1101,1259],[1096,1260],[1261,925],[1262,418],[1263,198],[1172,1264],[1265,302],[447,1266],[403,1267],[1268,678],[1269,180],[677,1270],[1271,758],[1214,1272],[1273,614],[1274,628],[1275,1056],[1276,498],[451,1277],[1161,1278],[1279,666],[49,1280],[1281,348],[1282,1186],[1283,1265],[382,1284],[1285,375],[1286,498],[1287,1186],[1288,312],[1289,555],[22,1290],[1291,342],[1151,1292],[721,1293],[1168,1294],[1295,748],[1082,1296],[1297,257],[24,1298],[1299,1030],[238,1300],[1301,1079],[913,1302],[696,1303],[1304,1009],[1305,1092],[549,1306],[40,1307],[1308,597],[1309,744],[268,1310],[1311,600],[1312,1231],[539,1313],[606,1314],[378,1315],[1011,1316],[1317,982],[1318,841],[253,1319],[1320,833],[1097,1321],[759,1322],[1323,619],[1324,1273],[1325,108],[510,1326],[909,1327],[566,1328],[1093,1329],[856,1330],[1331,20],[1332,112],[289,1333],[1334,279],[1335,939],[1336,1235],[1337,963],[943,1338],[1339,285],[1071,1340],[1244,1341],[1342,583],[1343,1339],[231,1344],[1345,45],[1346,997],[1347,171],[1348,1335],[1074,1349],[839,1350],[1351,454],[1352,84],[1353,750],[232,1354],[886,1355],[1356,344],[1357,427],[307,1358],[399,1359],[1360,760],[1361,767],[926,1362],[1363,477],[101,1364],[803,1365],[857,1366],[1367,976],[1368,150],[554,1369],[1370,657],[1062,1371],[880,1372],[1373,157],[1374,770],[751,1375],[514,1376],[906,1377],[1378,695],[981,1379],[1380,249],[1381,1286],[1081,1382],[1383,392],[1384,538],[1385,1194],[1386,175],[1387,592],[1388,966],[647,1389],[1347,1390],[684,1391],[1392,1105],[1055,1393],[240,1394],[1395,563],[1396,457],[1397,450],[1398,37],[1152,1399],[42,1400],[1401,1315],[589,1402],[1403,796],[1404,1376],[1405,468],[804,1406],[1407,631],[1408,701],[1355,1409],[1410,1287],[824,1411],[1399,1412],[1413,46],[160,1414],[1293,1415],[1416,1054],[163,1417],[1418,553],[1419,186],[1420,1058],[687,1421],[1418,1422],[1423,309],[763,1424],[1306,1425],[1426,340],[1427,932],[1428,528],[1429,1015],[538,1430],[850,1431],[156,1432],[425,1433],[45,1434],[375,1435],[1436,239],[407,1437],[533,1438],[1439,514],[1440,1092],[666,1441],[4,1442],[1443,901],[1197,1444],[1445,220],[541,1446],[413,1447],[1448,1215],[1449,865],[702,1450],[1451,763],[1452,1339],[1377,1453],[125,1454],[1455,841],[1456,1421],[1457,438],[1241,1458],[57,1459],[1460,356],[1461,1284],[326,1462],[1463,21],[1464,501],[668,1465],[1466,898],[351,1467],[1468,782],[543,1469],[1470,884],[1471,946],[265,1472],[1290,1473],[565,1474],[1475,491],[1316,1476],[1444,1477],[881,1478],[1479,850],[476,1480],[1481,1286],[779,1482],[207,1483],[750,1484],[536,1485]]
